\hypertarget{parse_8c}{\section{/serv/www/html\-\_\-lilian/bioplib-\/master/src/parse.c File Reference}
\label{parse_8c}\index{/serv/www/html\-\_\-lilian/bioplib-\/master/src/parse.\-c@{/serv/www/html\-\_\-lilian/bioplib-\/master/src/parse.\-c}}
}


A keyword command parser.  


{\ttfamily \#include $<$stdio.\-h$>$}\\*
{\ttfamily \#include $<$string.\-h$>$}\\*
{\ttfamily \#include $<$math.\-h$>$}\\*
{\ttfamily \#include $<$stdlib.\-h$>$}\\*
{\ttfamily \#include $<$ctype.\-h$>$}\\*
{\ttfamily \#include \char`\"{}Math\-Type.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}Sys\-Defs.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}macros.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}parse.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}general.\-h\char`\"{}}\\*
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{parse_8c_a350c9d6cb81908d59427ee96844d1a9c}{L\-F}~10
\item 
\#define \hyperlink{parse_8c_a876ce77f3c672c7162658151e648389e}{C\-R}~13
\item 
\#define \hyperlink{parse_8c_a3893f22ff2ffb60bb96886f6d4cb3404}{D\-I\-C}~34       /$\ast$ Double inverted commas                          $\ast$/
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{parse_8c_ac9aa602f7562ba794b53e6ffbc75115c}{bl\-Parse} (char $\ast$comline, int nkeys, \hyperlink{struct_key_wd}{Key\-Wd} $\ast$keywords, \hyperlink{_math_type_8h_a5821460e95a0800cf9f24c38915cbbde}{R\-E\-A\-L} $\ast$floatparam, char $\ast$$\ast$strparam)
\item 
int \hyperlink{parse_8c_af4d52eae06ff069484ebd98143722134}{bl\-Match} (char $\ast$comstring, char $\ast$string2, int $\ast$nletters)
\item 
int \hyperlink{parse_8c_af033f70cf7105d7542d8479f74273a5f}{bl\-Get\-String} (char $\ast$command, char $\ast$strparam)
\item 
int \hyperlink{parse_8c_a8b2804199a5cb9ee4afc116eae9061dc}{bl\-Get\-Param} (char $\ast$command, \hyperlink{_math_type_8h_a5821460e95a0800cf9f24c38915cbbde}{R\-E\-A\-L} $\ast$value, int $\ast$nletters)
\item 
int \hyperlink{parse_8c_afd91c119f7409f2c2f14151ca7bd6973}{bl\-Mparse} (char $\ast$comline, int nkeys, \hyperlink{struct_m_key_wd}{M\-Key\-Wd} $\ast$keywords, \hyperlink{_math_type_8h_a5821460e95a0800cf9f24c38915cbbde}{R\-E\-A\-L} $\ast$floatparam, char $\ast$$\ast$strparam, int $\ast$nparam)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
A keyword command parser. \begin{DoxyVersion}{Version}
V1.\-11 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
07.\-07.\-14 
\end{DoxyDate}
\begin{DoxyCopyright}{Copyright}
(c) U\-C\-L / Dr. Andrew C. R. Martin 1990-\/2014 
\end{DoxyCopyright}
\begin{DoxyAuthor}{Author}
Dr. Andrew C. R. Martin 
\end{DoxyAuthor}
\begin{DoxyParagraph}{}
Institute of Structural \& Molecular Biology, University College London, Gower Street, London. W\-C1\-E 6\-B\-T. 
\end{DoxyParagraph}
\begin{DoxyParagraph}{}
\href{mailto:andrew@bioinf.org.uk}{\tt andrew@bioinf.\-org.\-uk} \href{mailto:andrew.martin@ucl.ac.uk}{\tt andrew.\-martin@ucl.\-ac.\-uk}
\end{DoxyParagraph}
This code is N\-O\-T I\-N T\-H\-E P\-U\-B\-L\-I\-C D\-O\-M\-A\-I\-N, but it may be copied according to the conditions laid out in the accompanying file C\-O\-P\-Y\-I\-N\-G.\-D\-O\-C.

The code may be modified as required, but any modifications must be documented so that the person responsible can be identified.

The code may not be sold commercially or included as part of a commercial product except as described in the file C\-O\-P\-Y\-I\-N\-G.\-D\-O\-C.

\subsection*{Description\-: }

\hyperlink{parse_8c_ac9aa602f7562ba794b53e6ffbc75115c}{bl\-Parse()} is a command line parser which will accept upper or lower case commands and abbreviations. Comment lines may be indicated using a !. The keyword structure array and returned string array are defined thus\-: 
\begin{DoxyCode}
\hyperlink{struct_key_wd}{KeyWd} keywords[NCOMM];
\textcolor{keywordtype}{char}  *strparam[MAXSTRPARAM];
\end{DoxyCode}


The returned R\-E\-A\-L parameters are defined thus\-: 
\begin{DoxyCode}
\hyperlink{_math_type_8h_a5821460e95a0800cf9f24c38915cbbde}{REAL}  floatparam[MAXFLOATPARAM];
\end{DoxyCode}


Space for the returned strings must be allocated thus\-: 
\begin{DoxyCode}
strparam[n] = (\textcolor{keywordtype}{char} *)malloc(MAXSTRLEN * \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{char}));
\end{DoxyCode}
 and repeated for each parameter.

The keyword list with type and numbers of returned parameters is constructed using the M\-A\-K\-E\-K\-E\-Y macros\-: 
\begin{DoxyCode}
\hyperlink{parse_8h_a771c92e0b396c953fb6f27b584039623}{MAKEKEY}(keywords[0],\textcolor{stringliteral}{"RANGE"},\hyperlink{parse_8h_abc544a4ed22112e62773c113652c5063}{NUMBER},2);
\hyperlink{parse_8h_a771c92e0b396c953fb6f27b584039623}{MAKEKEY}(keywords[1],\textcolor{stringliteral}{"STRING"},\hyperlink{parse_8h_a0f4d394a3ab4e09bff60f714c66dc5ee}{STRING},1);
\end{DoxyCode}
 Here, the keywords must be defined in upper case.

\hyperlink{parse_8c_afd91c119f7409f2c2f14151ca7bd6973}{bl\-Mparse()} is used in the same way, but allows a variable number of parameters for each keyword. Keywords are of type \hyperlink{struct_m_key_wd}{M\-Key\-Wd} and are defined using the macro M\-A\-K\-E\-M\-K\-E\-Y\-: 
\begin{DoxyCode}
\hyperlink{parse_8h_abeec203e957ffcad9f578ca711ce0bbd}{MAKEMKEY}(keywords[0],\textcolor{stringliteral}{"RANGE"},\hyperlink{parse_8h_abc544a4ed22112e62773c113652c5063}{NUMBER},2,2);
\hyperlink{parse_8h_abeec203e957ffcad9f578ca711ce0bbd}{MAKEMKEY}(keywords[1],\textcolor{stringliteral}{"STRING"},\hyperlink{parse_8h_a0f4d394a3ab4e09bff60f714c66dc5ee}{STRING},1,3);
\end{DoxyCode}


\subsection*{Usage\-: }


\begin{DoxyCode}
\hyperlink{parse_8c_ac9aa602f7562ba794b53e6ffbc75115c}{blParse}(comline,nkeys,keywords,floatparam,strparam)
\end{DoxyCode}



\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$comline} & A command line string to parse \\
\hline
\mbox{\tt in}  & {\em nkeys} & Number of keywords \\
\hline
\mbox{\tt in}  & {\em $\ast$keywords} & Array of keyword structures \\
\hline
\mbox{\tt out}  & {\em $\ast$floatparam} & Array of returned strings \\
\hline
\mbox{\tt out}  & {\em $\ast$$\ast$strparam} & Array of pointers to returned strings \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Index of found command or error flag
\end{DoxyReturn}

\begin{DoxyCode}
\hyperlink{parse_8c_afd91c119f7409f2c2f14151ca7bd6973}{blMparse}(comline,nkeys,keywords,floatparam,strparam,nparam)
\end{DoxyCode}



\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$comline} & A command line string to parse \\
\hline
\mbox{\tt in}  & {\em nkeys} & Number of keywords \\
\hline
\mbox{\tt in}  & {\em $\ast$keywords} & Array of keyword structures \\
\hline
\mbox{\tt out}  & {\em $\ast$floatparam} & Array of returned strings \\
\hline
\mbox{\tt out}  & {\em $\ast$$\ast$strparam} & Array of pointers to returned strings \\
\hline
\mbox{\tt out}  & {\em $\ast$nparam} & Number of parameters found \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Index of found command or error flag
\end{DoxyReturn}
\subsection*{Revision History\-: }


\begin{DoxyItemize}
\item V1.\-0 11.\-07.\-90 Original
\item V1.\-1 29.\-10.\-90 match() now frees the memory it allocates and calls terminate() parse() now calls terminate() on the keyword string
\item V1.\-2 25.\-09.\-91 Messages will only appear from parse() if N\-O\-I\-S\-Y is \#defined. Added F\-P\-U support.
\item V1.\-3 28.\-05.\-92 A\-N\-S\-Ied and autodoc'd
\item V1.\-4 08.\-12.\-92 Includes stdlib.\-h
\item V1.\-5 22.\-04.\-93 Various tidying to exact A\-N\-S\-I standard and of function headers. Corrected some calls to free()
\item V1.\-6 16.\-06.\-93 Tidied for book
\item V1.\-7 01.\-03.\-94 Added mparse()
\item V1.\-8 11.\-03.\-94 Added internal support for lines starting with a \$. The line is passed as a system() call and parse() acts as if the line had been a comment.
\item V1.\-9 08.\-10.\-99 Initialised some variables
\item V1.\-10 28.\-02.\-11 Added \# as a comment introducer
\item V1.\-11 07.\-07.\-14 Use bl prefix for functions By\-: C\-T\-P 
\end{DoxyItemize}

Definition in file \hyperlink{parse_8c_source}{parse.\-c}.



\subsection{Macro Definition Documentation}
\hypertarget{parse_8c_a876ce77f3c672c7162658151e648389e}{\index{parse.\-c@{parse.\-c}!C\-R@{C\-R}}
\index{C\-R@{C\-R}!parse.c@{parse.\-c}}
\subsubsection[{C\-R}]{\setlength{\rightskip}{0pt plus 5cm}\#define C\-R~13}}\label{parse_8c_a876ce77f3c672c7162658151e648389e}


Definition at line 176 of file parse.\-c.

\hypertarget{parse_8c_a3893f22ff2ffb60bb96886f6d4cb3404}{\index{parse.\-c@{parse.\-c}!D\-I\-C@{D\-I\-C}}
\index{D\-I\-C@{D\-I\-C}!parse.c@{parse.\-c}}
\subsubsection[{D\-I\-C}]{\setlength{\rightskip}{0pt plus 5cm}\#define D\-I\-C~34       /$\ast$ Double inverted commas                          $\ast$/}}\label{parse_8c_a3893f22ff2ffb60bb96886f6d4cb3404}


Definition at line 177 of file parse.\-c.

\hypertarget{parse_8c_a350c9d6cb81908d59427ee96844d1a9c}{\index{parse.\-c@{parse.\-c}!L\-F@{L\-F}}
\index{L\-F@{L\-F}!parse.c@{parse.\-c}}
\subsubsection[{L\-F}]{\setlength{\rightskip}{0pt plus 5cm}\#define L\-F~10}}\label{parse_8c_a350c9d6cb81908d59427ee96844d1a9c}


Definition at line 175 of file parse.\-c.



\subsection{Function Documentation}
\hypertarget{parse_8c_a8b2804199a5cb9ee4afc116eae9061dc}{\index{parse.\-c@{parse.\-c}!bl\-Get\-Param@{bl\-Get\-Param}}
\index{bl\-Get\-Param@{bl\-Get\-Param}!parse.c@{parse.\-c}}
\subsubsection[{bl\-Get\-Param}]{\setlength{\rightskip}{0pt plus 5cm}int bl\-Get\-Param (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{command, }
\item[{{\bf R\-E\-A\-L} $\ast$}]{value, }
\item[{int $\ast$}]{nletters}
\end{DoxyParamCaption}
)}}\label{parse_8c_a8b2804199a5cb9ee4afc116eae9061dc}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$command} & A character string \\
\hline
\mbox{\tt out}  & {\em $\ast$value} & Returned float value \\
\hline
\mbox{\tt out}  & {\em $\ast$nletters} & Number of charcters pulled out of the command string \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 If error 1 If O\-K
\end{DoxyReturn}
Extracts the first space-\/delimited number from the `command' character string.


\begin{DoxyItemize}
\item 11.\-07.\-90 Original By\-: A\-C\-R\-M
\item 22.\-04.\-93 Tidied comments, etc. Corrected N\-U\-L\-L to 0
\item 07.\-07.\-14 Use bl prefix for functions By\-: C\-T\-P 
\end{DoxyItemize}

Definition at line 412 of file parse.\-c.

\hypertarget{parse_8c_af033f70cf7105d7542d8479f74273a5f}{\index{parse.\-c@{parse.\-c}!bl\-Get\-String@{bl\-Get\-String}}
\index{bl\-Get\-String@{bl\-Get\-String}!parse.c@{parse.\-c}}
\subsubsection[{bl\-Get\-String}]{\setlength{\rightskip}{0pt plus 5cm}int bl\-Get\-String (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{command, }
\item[{char $\ast$}]{strparam}
\end{DoxyParamCaption}
)}}\label{parse_8c_af033f70cf7105d7542d8479f74273a5f}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$command} & A character string \\
\hline
\mbox{\tt out}  & {\em $\ast$strparam} & Returned character string \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Number of characters pulled out of the command string
\end{DoxyReturn}
Returns the first space-\/delimited group of characters from character string `command'


\begin{DoxyItemize}
\item 11.\-07.\-90 Original By\-: A\-C\-R\-M
\item 22.\-04.\-93 Tidied comments, etc. Changed toggle method
\item 07.\-07.\-14 Use bl prefix for functions By\-: C\-T\-P 
\end{DoxyItemize}

Definition at line 358 of file parse.\-c.

\hypertarget{parse_8c_af4d52eae06ff069484ebd98143722134}{\index{parse.\-c@{parse.\-c}!bl\-Match@{bl\-Match}}
\index{bl\-Match@{bl\-Match}!parse.c@{parse.\-c}}
\subsubsection[{bl\-Match}]{\setlength{\rightskip}{0pt plus 5cm}int bl\-Match (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{comstring, }
\item[{char $\ast$}]{string2, }
\item[{int $\ast$}]{nletters}
\end{DoxyParamCaption}
)}}\label{parse_8c_af4d52eae06ff069484ebd98143722134}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$comstring} & A character string \\
\hline
\mbox{\tt in}  & {\em $\ast$string2} & A second string \\
\hline
\mbox{\tt out}  & {\em $\ast$nletters} & Number of letters matched \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 String mismatch 1 First string finished first 2 Second string finished first
\end{DoxyReturn}
Matches two strings, but stops the comparison as soon as a space or N\-U\-L\-L is found in either string. The returned value indicates which string finished first or 0 if the letters before the space or N\-U\-L\-L have a mismatch. The routine calls String\-To\-Upper() on `comstring' before the comparison.


\begin{DoxyItemize}
\item 11.\-07.\-90 Original By\-: A\-C\-R\-M
\item 22.\-04.\-93 Tidied comments, etc. Added check on malloc and corrected calls to free()
\item 07.\-07.\-14 Use bl prefix for functions By\-: C\-T\-P 
\end{DoxyItemize}

Definition at line 304 of file parse.\-c.

\hypertarget{parse_8c_afd91c119f7409f2c2f14151ca7bd6973}{\index{parse.\-c@{parse.\-c}!bl\-Mparse@{bl\-Mparse}}
\index{bl\-Mparse@{bl\-Mparse}!parse.c@{parse.\-c}}
\subsubsection[{bl\-Mparse}]{\setlength{\rightskip}{0pt plus 5cm}int bl\-Mparse (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{comline, }
\item[{int}]{nkeys, }
\item[{{\bf M\-Key\-Wd} $\ast$}]{keywords, }
\item[{{\bf R\-E\-A\-L} $\ast$}]{floatparam, }
\item[{char $\ast$$\ast$}]{strparam, }
\item[{int $\ast$}]{nparam}
\end{DoxyParamCaption}
)}}\label{parse_8c_afd91c119f7409f2c2f14151ca7bd6973}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$comline} & A command line string to parse \\
\hline
\mbox{\tt in}  & {\em nkeys} & Number of keywords \\
\hline
\mbox{\tt in}  & {\em $\ast$keywords} & Array of keyword structures \\
\hline
\mbox{\tt out}  & {\em $\ast$floatparam} & Array of returned strings \\
\hline
\mbox{\tt out}  & {\em $\ast$$\ast$strparam} & Array of pointers to returned strings \\
\hline
\mbox{\tt out}  & {\em $\ast$nparam} & Number of parameters found \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Index of found command or error flag
\end{DoxyReturn}
As \hyperlink{parse_8c_ac9aa602f7562ba794b53e6ffbc75115c}{bl\-Parse()}, but allows variable number of parameters to each keyword.


\begin{DoxyItemize}
\item 23.\-02.\-94 Original based on parse() By\-: A\-C\-R\-M
\item 11.\-03.\-94 Added \$ line handling
\item 08.\-10.\-99 Initialise nlett to 0
\item 07.\-07.\-14 Use bl prefix for functions By\-: C\-T\-P 
\end{DoxyItemize}

Definition at line 447 of file parse.\-c.

\hypertarget{parse_8c_ac9aa602f7562ba794b53e6ffbc75115c}{\index{parse.\-c@{parse.\-c}!bl\-Parse@{bl\-Parse}}
\index{bl\-Parse@{bl\-Parse}!parse.c@{parse.\-c}}
\subsubsection[{bl\-Parse}]{\setlength{\rightskip}{0pt plus 5cm}int bl\-Parse (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{comline, }
\item[{int}]{nkeys, }
\item[{{\bf Key\-Wd} $\ast$}]{keywords, }
\item[{{\bf R\-E\-A\-L} $\ast$}]{floatparam, }
\item[{char $\ast$$\ast$}]{strparam}
\end{DoxyParamCaption}
)}}\label{parse_8c_ac9aa602f7562ba794b53e6ffbc75115c}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$comline} & A command line string to parse \\
\hline
\mbox{\tt in}  & {\em nkeys} & Number of keywords \\
\hline
\mbox{\tt in}  & {\em $\ast$keywords} & Array of keyword structures \\
\hline
\mbox{\tt out}  & {\em $\ast$floatparam} & Array of returned strings \\
\hline
\mbox{\tt out}  & {\em $\ast$$\ast$strparam} & Array of pointers to returned strings \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Index of found command or error flag
\end{DoxyReturn}
Keyword-\/based command parser using a fixed number of parameters per command


\begin{DoxyItemize}
\item 11.\-07.\-90 Original By\-: A\-C\-R\-M
\item 22.\-04.\-93 Tidied comments, etc. Corrected N\-U\-L\-L to 0.
\item 11.\-03.\-94 Added \$ line handling
\item 08.\-10.\-99 Initialise nlett
\item 28.\-02.\-11 Added \# for comments
\item 07.\-07.\-14 Use bl prefix for functions By\-: C\-T\-P 
\end{DoxyItemize}

Definition at line 202 of file parse.\-c.

